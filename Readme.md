# 从领风者的弹幕和评论看二次元文化对马克思主义意识形态大众化的效果及观看群体话语表征分析

## 主要内容
借助 Python 中的爬虫，文本清洗，词云及词频分析，评论属性，情感分析方法，对于 bilibili 上的动漫《领风者》中的弹幕和评论进行分析，得到马克思主义借助二次元文化进行传播得到了大部分青少年的认可的结论。

## 代码来源
+ B站爬取弹幕代码来源（也算是第一次接触爬虫的学习过程）：https://blog.csdn.net/github_39611284/article/details/1192171140

+ 如果对于Bztm_pb2的生成有疑问，请看：[1](https://blog.csdn.net/github_39611284/article/details/119217114)和[2](https://blog.csdn.net/qq_41802773/article/details/119037934)

## 使用方法

### 内容获取

#### 爬取弹幕：

+ 先运行B站爬取弹幕.py，

+ 首先输入cookie，

+ 再输入bvid，

+ 最后输入日期 即爬取的日期范围 可以从该视频发布的第一天到今天，

+ 由于弹幕会有重复，所以我进行了一步去重，因此会生成两个csv文件。

#### 爬取评论：

+ 运行main.py

+ 在arr中分别输入要爬取的网址和对应的oid。

### 文本清洗：

#### 文本清洗.py

+ 利用了我们自己写的dict.txt（自定义分词词典）和根据网上内容补充的stopwords进行清洗。

+ 词云图效果还是不错的，但是后期进行其他文本分析的时候，更新方法还得继续改进。

#### 提取弹幕.py

+ 将弹幕内容和评论内容专门从csv文件中提取出来

#### 合并csv.py

+ 在进行整体分析时对所有csv文件进行合并

### 文本分析

#### 关键词词云

+ 我写了两种办法：

+ 第一种是生成正常的png图像，运行png词云.py，这里需要输入bvid

+ 第二种是生成html，运行html词云.py，这里也需要输入bvid（效果不佳）

#### 生成词频：

+ 运行词频tongji.py

#### 评论属性分析：

+ 运行评论回复数排序分析.py

+ 运行评论点赞数排序分析.py

+ 运行评论字数长度排序分析.py

+ 三个文件分别会生成以相应内容降序排序的文件，方便使用excel进行查看，后期会对于展示方式进行改进。

### LDA

+ 这个代码是可以跑得，主要使用gensim库，但是可能是没有预训练或者其他的原因，效果很差，还在探究的过程。

+ 注：里面有些代码是重复的，比如文本清洗在文本分析中我又进行了一次，因为感觉不会影响就没有再对于他进行调整了，后期会进行完善。
